-- âœ… FULL TOOL GIVER SYSTEM (PRIVATE SERVER TESTING ONLY)

local player = game:GetService("Players").LocalPlayer
local replicatedStorage = game:GetService("ReplicatedStorage")
local serverStorage = game:GetService("ServerStorage")

-- Setup RemoteEvent (safe for multiple runs)
local remote = replicatedStorage:FindFirstChild("GiveToolEvent")
if not remote then
    remote = Instance.new("RemoteEvent")
    remote.Name = "GiveToolEvent"
    remote.Parent = replicatedStorage
end

-- Setup tool folder (must be in ServerStorage)
local toolFolder = serverStorage:FindFirstChild("Tools")
if not toolFolder then
    toolFolder = Instance.new("Folder")
    toolFolder.Name = "Tools"
    toolFolder.Parent = serverStorage
end

-- Make sure server handler exists only once
if not _G.ToolHandlerSetup then
    _G.ToolHandlerSetup = true

    remote.OnServerEvent:Connect(function(plr, toolName)
        local tool = toolFolder:FindFirstChild(toolName)
        if tool and tool:IsA("Tool") then
            local clone = tool:Clone()
            clone.Parent = plr:WaitForChild("Backpack")
        end
    end)
end

-- âœ… GUI SETUP (Client-side)
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "ToolGrabberGui"
gui.ResetOnSpawn = false

local title = Instance.new("TextLabel", gui)
title.Text = "ðŸ§° Get Server Tools"
title.Size = UDim2.new(0, 300, 0, 40)
title.Position = UDim2.new(0, 20, 0.1, 0)
title.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 20

local frame = Instance.new("ScrollingFrame", gui)
frame.Size = UDim2.new(0, 300, 0.6, 0)
frame.Position = UDim2.new(0, 20, 0.1 + 40/1080, 0)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.ScrollBarThickness = 6

local layout = Instance.new("UIListLayout", frame)
layout.Padding = UDim.new(0, 4)
layout.SortOrder = Enum.SortOrder.Name

-- Wait for server to populate Tools folder manually or externally
task.wait(1)

-- List tools
for _, tool in ipairs(toolFolder:GetChildren()) do
    if tool:IsA("Tool") then
        local button = Instance.new("TextButton")
        button.Size = UDim2.new(1, -10, 0, 40)
        button.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
        button.TextColor3 = Color3.new(1, 1, 1)
        button.Font = Enum.Font.GothamBold
        button.TextSize = 16
        button.Text = "Get: " .. tool.Name
        button.Parent = frame

        button.MouseButton1Click:Connect(function()
            remote:FireServer(tool.Name)
            button.Text = "âœ… Given: " .. tool.Name
        end)
    end
end

frame.CanvasSize = UDim2.new(0, 0, 0, #frame:GetChildren() * 44)
